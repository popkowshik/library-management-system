<style>
    .custom-message-wrapper {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.custom-alert {
    background: #fff;
    color: #333;
    border-left: 4px solid #3498db;
    padding: 12px 16px;
    border-radius: 6px;
    min-width: 250px;
    max-width: 300px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    position: relative;
    animation: fadeSlide 0.4s ease forwards;
}

.custom-alert.success {
    border-left-color: #2ecc71;
}

.custom-alert.error {
    border-left-color: #e74c3c;
}

.custom-alert.info {
    border-left-color: #3498db;
}

.alert-content {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    font-weight: 500;
}

.alert-content svg {
    flex-shrink: 0;
}

.close-btn {
    background: transparent;
    border: none;
    font-size: 18px;
    color: #888;
    margin-left: auto;
    cursor: pointer;
}

.close-btn:hover {
    color: #e74c3c;
}

.progress-bar {
    height: 4px;
    background: #27ae60;
    width: 100%;
    position: absolute;
    bottom: 0;
    left: 0;
    transition: width 0.3s linear;
}

@keyframes fadeSlide {
    from {
        opacity: 0;
        transform: translateX(50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

</style>

<div class="custom-message-wrapper">
    {% for message in messages %}
        <div class="custom-alert 
            {% if 'success' in message.tags %}success
            {% elif 'error' in message.tags %}error
            {% else %}info
            {% endif %}">
            
            <div class="alert-content">
                
                {% if 'success' in message.tags %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#27ae60" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 11.5L3 8l1.4-1.4 2.1 2.1 5.1-5.1L13 5l-6.5 6.5z"/>
                    </svg>
                {% elif 'error' in message.tags %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#e74c3c" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.964 0L.165 13.233c-.457.778.091 1.767.982 1.767h13.707c.89 0 1.438-.99.982-1.767L8.982 1.566zM7.002 5h2v4h-2V5zm0 6h2v2h-2v-2z"/>
                    </svg>
                {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#3498db" viewBox="0 0 16 16">
                        <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM7 4h2v2H7V4zm0 3h2v5H7V7z"/>
                    </svg>
                {% endif %}

                <span>{{ message }}</span>

                <button class="close-btn" onclick="this.parentElement.parentElement.remove();">&times;</button>
            </div>

            <div class="progress-bar"></div>
        </div>
    {% endfor %}
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    const alerts = document.querySelectorAll('.custom-alert');

    alerts.forEach(alert => {
        const progressBar = alert.querySelector('.progress-bar');
        let width = 100;

        const interval = setInterval(() => {
            width -= 0.5;
            progressBar.style.width = width + '%';

            if (width <= 0) {
                clearInterval(interval);
                alert.style.opacity = 0;
                setTimeout(() => alert.remove(), 300);
            }
        }, 20);
    });
});
</script>
